"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TextIconRenderer = exports.StringIconRenderer = exports.NumberIconRenderer = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _react = _interopRequireDefault(require("react"));

var _InputAdornment = _interopRequireDefault(require("@material-ui/core/InputAdornment"));

var _TextField = require("@ui-schema/ds-material/Widgets/TextField");

var _uiSchema = require("@ui-schema/ui-schema");

var _excluded = ["schema"],
    _excluded2 = ["schema"],
    _excluded3 = ["schema"];

var computeIcon = function computeIcon(schema, baseInputProps) {
  var icon = schema.getIn(['view', 'icon']);
  var iconEnd = schema.getIn(['view', 'iconEnd']);
  return _react["default"].useMemo(function () {
    var inputProps = baseInputProps || {};

    if (icon && (typeof iconEnd === 'boolean' && !iconEnd || typeof iconEnd !== 'boolean')) {
      inputProps['startAdornment'] = /*#__PURE__*/_react["default"].createElement(_InputAdornment["default"], {
        position: "start"
      }, /*#__PURE__*/_react["default"].createElement(_uiSchema.Trans, {
        text: 'icons.' + icon
      }));
    }

    if (typeof iconEnd !== 'boolean' && iconEnd) {
      inputProps['endAdornment'] = /*#__PURE__*/_react["default"].createElement(_InputAdornment["default"], {
        position: "end"
      }, /*#__PURE__*/_react["default"].createElement(_uiSchema.Trans, {
        text: 'icons.' + iconEnd
      }));
    }

    return inputProps;
  }, [icon, baseInputProps]);
};

var StringIconRenderer = function StringIconRenderer(_ref) {
  var schema = _ref.schema,
      props = (0, _objectWithoutProperties2["default"])(_ref, _excluded);
  var InputProps = computeIcon(schema, props.InputProps);
  return /*#__PURE__*/_react["default"].createElement(_TextField.StringRenderer, (0, _extends2["default"])({}, props, {
    schema: schema,
    InputProps: InputProps
  }));
};

exports.StringIconRenderer = StringIconRenderer;

var TextIconRenderer = function TextIconRenderer(_ref2) {
  var schema = _ref2.schema,
      props = (0, _objectWithoutProperties2["default"])(_ref2, _excluded2);
  var InputProps = computeIcon(schema, props.InputProps);
  return /*#__PURE__*/_react["default"].createElement(_TextField.TextRenderer, (0, _extends2["default"])({}, props, {
    schema: schema,
    InputProps: InputProps
  }));
};

exports.TextIconRenderer = TextIconRenderer;

var NumberIconRenderer = function NumberIconRenderer(_ref3) {
  var schema = _ref3.schema,
      props = (0, _objectWithoutProperties2["default"])(_ref3, _excluded3);
  var InputProps = computeIcon(schema, props.InputProps);
  return /*#__PURE__*/_react["default"].createElement(_TextField.NumberRenderer, (0, _extends2["default"])({}, props, {
    schema: schema,
    InputProps: InputProps
  }));
};

exports.NumberIconRenderer = NumberIconRenderer;