"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.extractValue = extractValue;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _react = _interopRequireDefault(require("react"));

var _memo = require("@ui-schema/ui-schema/Utils/memo");

var _UIStore = require("@ui-schema/ui-schema/UIStore");

var _UIStoreActions = require("@ui-schema/ui-schema/UIStoreActions");

function extractValue(Component) {
  var ExtractValue = function ExtractValue(p) {
    var _useUIStore = (0, _UIStore.useUIStore)(),
        store = _useUIStore.store,
        showValidity = _useUIStore.showValidity;

    var _useUIStoreActions = (0, _UIStoreActions.useUIStoreActions)(),
        onChange = _useUIStoreActions.onChange;

    var values = store === null || store === void 0 ? void 0 : store.extractValues(p.storeKeys); // @ts-ignore

    return /*#__PURE__*/_react["default"].createElement(Component, (0, _extends2["default"])({}, p, {
      // `showValidity` is overridable by render flow, e.g. nested Stepper
      showValidity: p.showValidity || showValidity,
      onChange: onChange
    }, values || {}));
  };

  ExtractValue.displayName = "ExtractValue(".concat((0, _memo.getDisplayName)(Component), ")");
  return ExtractValue;
}